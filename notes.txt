to do:
Implement logic for fragments
Implement writing to output file
Remove warnings
Reformat all code